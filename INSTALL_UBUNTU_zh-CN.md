# 在 Ubuntu 22.04 LTS 上部署本项目

本指南将指导您如何在 Ubuntu 22.04 LTS 服务器上部署和运行本项目。

## 前提条件

- 一台运行 Ubuntu 22.04 LTS 的服务器。
- root 或 sudo 权限。
- 已安装 Node.js (建议使用 v12.x 或更高版本)。您可以通过 `node -v` 命令检查版本。

## 部署步骤

请按照以下步骤，依次执行命令。

### 1. 从GitHub克隆项目文件

首先，您需要从GitHub仓库将项目文件下载到您的服务器上。

```sh
git clone https://github.com/huang5307/StockVolatility.git
```

### 2. 进入项目目录

下载完成后，使用`cd`命令进入项目文件夹。

```sh
cd StockVolatility
```

### 3. 安装项目依赖

项目依赖于`express`和`axios`，您需要使用npm来安装它们。

```sh
npm install
```

### 4. 启动后端服务

安装完依赖后，您就可以启动Node.js后端服务了。为了让服务在您关闭终端后也能持续运行，我们强烈建议使用 `pm2` 这个工具，它可以守护进程，并在服务器重启后自动运行您的应用。

**a. 安装 pm2**
如果您的服务器上没有安装`pm2`，请先执行以下命令来全局安装它：
```sh
npm install pm2 -g
```

**b. 使用 pm2 启动服务**
然后，使用`pm2`来启动`server.js`：
```sh
pm2 start server.js --name StockVolatility
```
这个命令会在后台启动您的服务，并将其命名为 "StockVolatility"。您可以使用 `pm2 list` 查看服务状态。

**c. 设置开机自启**
为了让服务在服务器重启后也能自动运行，执行以下命令：
```sh
pm2 startup
```
它会生成一行命令（类似于 `sudo env PATH=...`），您需要复制并执行那一行生成的命令来完成开机自启的设置。

### 5. 配置防火墙

为了让外部用户能够访问您的应用，您需要确保服务器的防火墙（如 ufw）允许访问3000端口。

```sh
ufw allow 3000/tcp
```

### 6. 访问您的应用

部署完成！现在，您可以通过任何浏览器访问您的应用了。地址是：

`http://<您的服务器公网IP地址>:3000/app.html`

请将 `<您的服务器公网IP地址>` 替换成您服务器的实际IP地址即可。

---

### 备用方案 (如果不使用pm2)

如果您不想安装`pm2`，也可以使用`nohup`命令来让服务在后台运行，但这功能相对简单，且在服务器重启后需要您手动重新启动服务。

```sh
nohup node server.js &
```